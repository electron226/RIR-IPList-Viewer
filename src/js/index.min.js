(function(){var j,o,g,f,h,c,n,k,p,q,l,b,e,d,i,m,a;a=150;i=5;m=typeof exports!=="undefined"&&exports!==null?exports:this;$.fn.state=function(r){var s;s="disabled";return this.each(function(){var t;t=$(this);t.html(t.data()[r]);if(r==="loading"){return t.addClass(s).attr(s,s)}else{return t.removeClass(s).removeAttr(s)}})};d=NaN;e=[];$.fn.UpdateTable=function(r){var s;$("#load_circle").css("display","inline");s=$(this);s.state("loading");return $.getJSON("/json",r,function(t){var u;e=t;q(0,a);u={view_record:a,total_record:t.length,nav_count:i};d=$("#view_pages").pagination(u);s.state("complete");return $("#load_circle").css("display","none")})};m.GetViewTable=function(r){q((r-1)*a,r*a);return d.MakeNavigator(r)};q=function(w,t){var s,r,v,u;v="";r=0;for(s=u=w;w<=t?u<t:u>t;s=w<=t?++u:--u){if(e[s]!=null){v+="<tr>";v+="<td>"+escape(e[s].registry)+"</td>";v+="<td>"+escape(e[s].country)+"</td>";v+="<td>"+escape(e[s].StartIP)+"</td>";v+="<td>"+escape(e[s].EndIP)+"</td>";v+="</tr>"}}return $("#viewbar tbody").html(v)};m.ChangeRow=function(r){var s;a=r;$("#view_row .active").removeClass("active");$("#view_row li:eq("+k(r)+")").addClass("active");if(d){q(0,a);s={view_record:a,total_record:d.total_record,nav_count:i};return d=$("#view_pages").pagination(s)}};k=function(r){return(r/50)-1};$.fn.pagination=function(r){r.elements=r.elements!=null?r.elements:$(this);return new p(r)};$.fn.pagination.defaults={current_page:1,view_record:10,total_record:0,nav_count:5};p=function(r){var s;s=$.extend({},$.fn.pagination.defaults,r);this.current_page=s.current_page;this.view_record=s.view_record;this.total_record=s.total_record;this.total_page=Math.ceil(this.total_record/this.view_record);this.nav_count=s.nav_count;this.elements=s.elements;this.Initialized();return this};p.prototype={Initialized:function(){if(this.total_page<this.nav_count){this.nav_count=this.total_page}if(this.total_page<=1||this.total_page<this.current_page){this.elements.empty();return this.elements.css("display","none")}else{this.MakeNavigator(this.current_page);return this.elements.css("display","block")}},MakeNavigator:function(w){var x,t,u,s,r,v;this.elements.empty();s=Math.floor(this.nav_count/2);x=w-s;u=w+s;if(x<=0){x=1;u=this.nav_count}if(u>this.total_page){x=this.total_page-this.nav_count+1;u=this.total_page}r="<ul>";if(w>2){r+='<li class="first">'}else{r+='<li class="first active">'}r+='<a href="#" onclick="GetViewTable(1)">&laquo;</a></li>';if(w>1){r+='<li class="prev">'}else{r+='<li class="prev active">'}r+='<a href="#" onclick="GetViewTable('+(w-1)+')">&lsaquo;</a></li>';for(t=v=x;x<=u?v<=u:v>=u;t=x<=u?++v:--v){if(t===w){r+='<li class="page active">'}else{r+='<li class="page">'}r+='<a href="#" onclick="GetViewTable('+t+')">'+t+"</a></li>"}if(w<this.total_page){r+='<li class="next">'}else{r+='<li class="next active">'}r+='<a href="#" onclick="GetViewTable('+(w+1)+')">&rsaquo;</a></li>';if(w<this.total_page-1){r+='<li class="last">'}else{r+='<li class="last active">'}r+='<a href="#" onclick="GetViewTable('+this.total_page+')">&raquo;</a></li>';r+="</ul>";return this.elements.append(r)}};$("#registry .save").click(function(){var s,r;s=(function(){var w,u,v,t;v=$("#registry .rir:checked");t=[];for(w=0,u=v.length;w<u;w++){r=v[w];t.push(r.value)}return t})();$(this).UpdateTable({registry:s.join(",")});return c.click()});$("#country .save").click(function(){var s,r;s=(function(){var w,u,v,t;v=$("#country .cc:checked");t=[];for(w=0,u=v.length;w<u;w++){r=v[w];t.push(r.value)}return t})();$(this).UpdateTable({country:s.join(",")});return n.click()});$("#registry .rir").click(function(){if($("#registry_all").attr("checked")){return $("#registry_all").removeAttr("checked")}});$("#country .cc").click(function(){if($("#country_all").attr("checked")){return $("#country_all").removeAttr("checked")}});$("#registry .all").click(function(){if(this.checked){return $("#registry input").attr("checked","checked")}else{return $("#registry input").removeAttr("checked")}});$("#country .all").click(function(){if(this.checked){return $("#country input").attr("checked","checked")}else{return $("#country input").removeAttr("checked")}});n=$("#registry .clear").click(function(){return $("#registry input").removeAttr("checked")});c=$("#country .clear").click(function(){return $("#country input").removeAttr("checked")});l=$("#custom input");b="<CC>: <IPSTART>-<IPEND>";h=function(s){var r;r=l.attr("value");r+=s;return l.attr("value",r)};$("#custom .set_registry").click(function(){h("<REGISTRY>");return g.keyup()});$("#custom .set_country").click(function(){h("<CC>");return g.keyup()});$("#custom .set_ipstart").click(function(){h("<IPSTART>");return g.keyup()});$("#custom .set_ipend").click(function(){h("<IPEND>");return g.keyup()});o=$("#custom .reset").click(function(){j.click();h(b);return g.keyup()});j=$("#custom .clear").click(function(){l.attr("value","");return $("#custom .result").text("")});g=l.keyup(function(){var s,r;r=$(this).attr("value");s=$.trim(r);s=s.replace(/<REGISTRY>/g,"APNIC");s=s.replace(/<CC>/g,"JP");s=s.replace(/<IPSTART>/g,"192.168.0.0");s=s.replace(/<IPEND>/g,"192.168.0.255");return $("#custom .result").text(s)});$("#custom .output").click(function(){var r,u,v,t,x,w,s;if(e.length>0){u=l.attr("value");r=$.trim(u);t="";for(w=0,s=e.length;w<s;w++){v=e[w];x=r.replace(/<REGISTRY>/g,v.registry);x=x.replace(/<CC>/g,v.country);x=x.replace(/<IPSTART>/g,v.StartIP);x=x.replace(/<IPEND>/g,v.EndIP);t+=x+"<br>"}return $("body").html(t)}else{return alert("データが取得されていません。")}});$("#custom .download").click(function(){var x,r,t,w,u,s,v;v=(function(){var B,z,A,y;A=$("#registry .rir:checked");y=[];for(B=0,z=A.length;B<z;B++){u=A[B];y.push(u.value)}return y})();x=(function(){var B,z,A,y;A=$("#country .cc:checked");y=[];for(B=0,z=A.length;B<z;B++){u=A[B];y.push(u.value)}return y})();if(v.length>0&&x.length>0){return alert("レジストリ側、国名側の両方のチェックボックスにチェックが入っています。\nどちらか片方のチェックボックスをクリアして、再度行ってください。")}else{if(v.length===0&&x.length===0){return alert("レジストリ側、国名側の両方のチェックボックスにチェックが入っていません。\nどちらか片方の取得したいチェックボックスを選択して、再度行ってください。")}else{t=l.attr("value");r=$.trim(t);if(v.length>0){w=v.join(",");s="?registry="+w}else{w=x.join(",");s="?country="+w}return location.href=encodeURI("/jsoncustom"+s+"&settings="+r)}}});$("#custom").ready(function(){return o.click()});f=function(){var r;r=navigator.appVersion.toLowerCase();if(r.indexOf("msie")>-1){return parseInt(r.replace(/.*msie[ ]/,"").match(/^[0-9]+/))}else{return}};$(document).ready(function(){var r,s;$("#JavaScript_OFF").css("display","none");s=f();if(s<9){$("#NoBrowser").css("display","block")}$("#view_row li:eq("+k(a)+")").addClass("active");r=$("#movepage");r.hide();return $(function(){$(window).scroll(function(){var t;t=$(this).scrollTop();if(t>100){return r.fadeIn()}else{return r.fadeOut()}});return r.click(function(){$("body, html").animate({scrollTop:0},600);return false})})})}).call(this);
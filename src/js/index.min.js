(function(){var r,s,i,t,j,u,v,o,w,m,p,n,k,f,l,q,h;h=150;q="undefined"!==typeof exports&&null!==exports?exports:this;$.fn.state=function(a){return this.each(function(){var b;b=$(this);b.html(b.data()[a]);return"loading"===a?b.addClass("disabled").attr("disabled","disabled"):b.removeClass("disabled").removeAttr("disabled")})};l=NaN;f=[];$.fn.UpdateTable=function(a){var b;$("#load_circle").css("display","inline");b=$(this);b.state("loading");return $.getJSON("/json",a,function(a){f=a;n(0,h);a={view_record:h,
total_record:a.length,nav_count:5};l=$("#view_pages").pagination(a);b.state("complete");return $("#load_circle").css("display","none")})};q.GetViewTable=function(a){n((a-1)*h,a*h);return l.MakeNavigator(a)};n=function(a,b){var e,d,c;d="";for(e=c=a;a<=b?c<b:c>b;e=a<=b?++c:--c)null!=f[e]&&(d+="<tr>",d+="<td>"+escape(f[e].registry)+"</td>",d+="<td>"+escape(f[e].country)+"</td>",d+="<td>"+escape(f[e].StartIP)+"</td>",d+="<td>"+escape(f[e].EndIP)+"</td>",d+="</tr>");return $("#viewbar tbody").html(d)};
q.ChangeRow=function(a){h=a;$("#view_row .active").removeClass("active");$("#view_row li:eq("+o(a)+")").addClass("active");if(l)return n(0,h),a={view_record:h,total_record:l.total_record,nav_count:5},l=$("#view_pages").pagination(a)};o=function(a){return a/50-1};$.fn.pagination=function(a){a.elements=null!=a.elements?a.elements:$(this);return new p(a)};$.fn.pagination.defaults={current_page:1,view_record:10,total_record:0,nav_count:5};p=function(a){a=$.extend({},$.fn.pagination.defaults,a);this.current_page=
a.current_page;this.view_record=a.view_record;this.total_record=a.total_record;this.total_page=Math.ceil(this.total_record/this.view_record);this.nav_count=a.nav_count;this.elements=a.elements;this.Initialized();return this};p.prototype={Initialized:function(){this.total_page<this.nav_count&&(this.nav_count=this.total_page);if(1>=this.total_page||this.total_page<this.current_page)return this.elements.empty(),this.elements.css("display","none");this.MakeNavigator(this.current_page);return this.elements.css("display",
"block")},MakeNavigator:function(a){var b,e,d,c,g;this.elements.empty();e=Math.floor(this.nav_count/2);b=a-e;d=a+e;0>=b&&(b=1,d=this.nav_count);d>this.total_page&&(b=this.total_page-this.nav_count+1,d=this.total_page);c="<ul>";c=(2<a?c+'<li class="first">':c+'<li class="first active">')+'<a href="#" onclick="GetViewTable(1)">&laquo;</a></li>';c=(1<a?c+'<li class="prev">':c+'<li class="prev active">')+('<a href="#" onclick="GetViewTable('+(a-1)+')">&lsaquo;</a></li>');for(e=g=b;b<=d?g<=d:g>=d;e=b<=
d?++g:--g)c=e===a?c+'<li class="page active">':c+'<li class="page">',c+='<a href="#" onclick="GetViewTable('+e+')">'+e+"</a></li>";c=a<this.total_page?c+'<li class="next">':c+'<li class="next active">';c+='<a href="#" onclick="GetViewTable('+(a+1)+')">&rsaquo;</a></li>';c=a<this.total_page-1?c+'<li class="last">':c+'<li class="last active">';c+='<a href="#" onclick="GetViewTable('+this.total_page+')">&raquo;</a></li>';return this.elements.append(c+"</ul>")}};w=function(a){var b,e,d;if(a=a.match(/(\d+).(\d+).(\d+).(\d+)/)){d=
a.slice(1,5);a=0;for(e=d.length;a<e;a++)if(b=d[a],b=parseInt(b),0>b||255<b)return!1;return!0}return null};m=$("a#ip_search");m.click(function(){var a;$("#search_circle").css("display","inline");$("a#ip_search").attr("data-original-title","\u691c\u7d22\u30a8\u30e9\u30fc");$("a#ip_search").attr("data-content",'<p>\u6b63\u3057\u3044IP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p><div><button class="btn-primary"                           onclick="search_result_close()">\u9589\u3058\u308b</button>        </div>        <script type="text/javascript">            function search_result_close() {                $("a#ip_search").popover("hide")            }        <\/script>');
a=escape($.trim($("input#ip_search_box").attr("value")));if(w(a))return $.getJSON("/search",{search_ip:a},function(b){f=b[0];""!==f.country?(b="<table class='table'>"+("<tr>                            <td>\u691c\u7d22IP</td>                            <td>"+a+"</td>                        </tr>"),b+="<tr>                            <td>\u56fd\u540d\u30b3\u30fc\u30c9</td>                            <td>"+f.country+"</td>                        </tr>",b+="<tr>                            <td>\u56fd\u540d</td>                            <td>"+
f.name+"</td>                        </tr>",b+="</table>",$("a#ip_search").attr("data-original-title","\u691c\u7d22\u7d50\u679c")):b="<p>\u8a72\u5f53\u30a2\u30c9\u30ec\u30b9\u7121\u3057\u3002</p>";$("a#ip_search").attr("data-content",b+'<div><button class="btn-primary"                           onclick="search_result_close()">\u9589\u3058\u308b</button>        </div>        <script type="text/javascript">            function search_result_close() {                $("a#ip_search").popover("hide")            }        <\/script>');
$("#search_circle").css("display","none");return m.popover("show")});$("#search_circle").css("display","none");m.popover("show")});$("#registry .save").click(function(){var a,b,e,d,c;d=$("#registry .rir:checked");c=[];b=0;for(e=d.length;b<e;b++)a=d[b],c.push(a.value);$(this).UpdateTable({registry:c.join(",")});return u.click()});$("#country .save").click(function(){var a,b,e,d,c;d=$("#country .cc:checked");c=[];b=0;for(e=d.length;b<e;b++)a=d[b],c.push(a.value);$(this).UpdateTable({country:c.join(",")});
return v.click()});$("#registry .rir").click(function(){if($("#registry_all").attr("checked"))return $("#registry_all").removeAttr("checked")});$("#country .cc").click(function(){if($("#country_all").attr("checked"))return $("#country_all").removeAttr("checked")});$("#registry .all").click(function(){return this.checked?$("#registry input").attr("checked","checked"):$("#registry input").removeAttr("checked")});$("#country .all").click(function(){return this.checked?$("#country input").attr("checked",
"checked"):$("#country input").removeAttr("checked")});v=$("#registry .clear").click(function(){return $("#registry input").removeAttr("checked")});u=$("#country .clear").click(function(){return $("#country input").removeAttr("checked")});k=$("#custom input");j=function(a){var b;b=k.attr("value");return k.attr("value",b+a)};$("#custom .set_registry").click(function(){j("<REGISTRY>");return i.keyup()});$("#custom .set_country").click(function(){j("<CC>");return i.keyup()});$("#custom .set_ipstart").click(function(){j("<IPSTART>");
return i.keyup()});$("#custom .set_ipend").click(function(){j("<IPEND>");return i.keyup()});s=$("#custom .reset").click(function(){r.click();j("<CC>: <IPSTART>-<IPEND>");return i.keyup()});r=$("#custom .clear").click(function(){k.attr("value","");return $("#custom .result").text("")});i=k.keyup(function(){var a,b;b=$(this).attr("value");b=$.trim(b);a=b.replace(/<REGISTRY>/g,"APNIC");a=a.replace(/<CC>/g,"JP");a=a.replace(/<IPSTART>/g,"192.168.0.0");a=a.replace(/<IPEND>/g,"192.168.0.255");$("#custom .result").text(a);
var e,d,c,g;c=$("#registry .rir:checked");g=[];e=0;for(d=c.length;e<d;e++)a=c[e],g.push(a.value);var f;c=$("#country .cc:checked");f=[];e=0;for(d=c.length;e<d;e++)a=c[e],f.push(a.value);return 0<g.length||0<f.length?(0<g.length?(a=g.join(","),a="?registry="+a):(a=f.join(","),a="?country="+a),$("#custom .result_url").text(encodeURI(location.protocol+"//"+location.host+"/jsoncustom"+a+"&settings="+b))):$("#custom .result_url").text("")});$("#custom .download").click(function(){var a,b,e,d,c;c=$("#registry .rir:checked");
b=[];e=0;for(d=c.length;e<d;e++)a=c[e],b.push(a.value);var f;f=$("#country .cc:checked");e=[];d=0;for(c=f.length;d<c;d++)a=f[d],e.push(a.value);if(0<b.length&&0<e.length)return alert("\u30ec\u30b8\u30b9\u30c8\u30ea\u5074\u3001\u56fd\u540d\u5074\u306e\u4e21\u65b9\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306b\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u3069\u3061\u3089\u304b\u7247\u65b9\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u30af\u30ea\u30a2\u3057\u3066\u3001\u518d\u5ea6\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002");
if(0===b.length&&0===e.length)return alert("\u30ec\u30b8\u30b9\u30c8\u30ea\u5074\u3001\u56fd\u540d\u5074\u306e\u4e21\u65b9\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306b\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\u3069\u3061\u3089\u304b\u7247\u65b9\u306e\u53d6\u5f97\u3057\u305f\u3044\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u9078\u629e\u3057\u3066\u3001\u518d\u5ea6\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002");a=k.attr("value");a=
$.trim(a);0<b.length?(b=b.join(","),b="?registry="+b):(b=e.join(","),b="?country="+b);return location.href=encodeURI("/jsoncustom"+b+"&settings="+a)});$("#custom").ready(function(){return s.click()});$(".navbar [href=#custom]").click(function(){return i.keyup()});t=function(){var a;a=navigator.appVersion.toLowerCase();if(-1<a.indexOf("msie"))return parseInt(a.replace(/.*msie[ ]/,"").match(/^[0-9]+/))};$(document).ready(function(){var a;$("#JavaScript_OFF").css("display","none");9>t()&&$("#NoBrowser").css("display",
"block");m.popover({trigger:"manual",html:"true",placement:"bottom"});$("#view_row li:eq("+o(h)+")").addClass("active");a=$("#movepage");a.hide();return $(function(){$(window).scroll(function(){return 100<$(this).scrollTop()?a.fadeIn():a.fadeOut()});return a.click(function(){$("body, html").animate({scrollTop:0},600);return!1})})})}).call(this);

(function(){var i,n,f,g,c,m,j,o,p,k,b,e,d,h,l,a;a=150;h=5;l=typeof exports!=="undefined"&&exports!==null?exports:this;$.fn.state=function(q){var r;r="disabled";return this.each(function(){var s;s=$(this);s.html(s.data()[q]);if(q==="loading"){return s.addClass(r).attr(r,r)}else{return s.removeClass(r).removeAttr(r)}})};d=NaN;e=[];$.fn.UpdateTable=function(q){var r;$("#load_circle").css("display","inline");r=$(this);r.state("loading");return $.getJSON("/json",q,function(s){var t;e=s;p(0,a);t={view_record:a,total_record:s.length,nav_count:h};d=$("#view_pages").pagination(t);r.state("complete");return $("#load_circle").css("display","none")})};l.GetViewTable=function(q){p((q-1)*a,q*a);return d.MakeNavigator(q)};p=function(v,s){var r,q,u,t;u="";q=0;for(r=t=v;v<=s?t<s:t>s;r=v<=s?++t:--t){if(e[r]!=null){u+="<tr>";u+="<td>"+escape(e[r].registry)+"</td>";u+="<td>"+escape(e[r].country)+"</td>";u+="<td>"+escape(e[r].StartIP)+"</td>";u+="<td>"+escape(e[r].EndIP)+"</td>";u+="</tr>"}}return $("#viewbar tbody").html(u)};l.ChangeRow=function(q){var r;a=q;$("#view_row .active").removeClass("active");$("#view_row li:eq("+j(q)+")").addClass("active");if(d){p(0,a);r={view_record:a,total_record:d.total_record,nav_count:h};return d=$("#view_pages").pagination(r)}};j=function(q){return(q/50)-1};$.fn.pagination=function(q){q.elements=q.elements!=null?q.elements:$(this);return new o(q)};$.fn.pagination.defaults={current_page:1,view_record:10,total_record:0,nav_count:5};o=function(q){var r;r=$.extend({},$.fn.pagination.defaults,q);this.current_page=r.current_page;this.view_record=r.view_record;this.total_record=r.total_record;this.total_page=Math.ceil(this.total_record/this.view_record);this.nav_count=r.nav_count;this.elements=r.elements;this.Initialized();return this};o.prototype={Initialized:function(){if(this.total_page<this.nav_count){this.nav_count=this.total_page}if(this.total_page<=1||this.total_page<this.current_page){this.elements.empty();return this.elements.css("display","none")}else{this.MakeNavigator(this.current_page);return this.elements.css("display","block")}},MakeNavigator:function(v){var w,s,t,r,q,u;this.elements.empty();r=Math.floor(this.nav_count/2);w=v-r;t=v+r;if(w<=0){w=1;t=this.nav_count}if(t>this.total_page){w=this.total_page-this.nav_count+1;t=this.total_page}q="<ul>";if(v>2){q+='<li class="first">'}else{q+='<li class="first active">'}q+='<a href="#" onclick="GetViewTable(1)">&laquo;</a></li>';if(v>1){q+='<li class="prev">'}else{q+='<li class="prev active">'}q+='<a href="#" onclick="GetViewTable('+(v-1)+')">&lsaquo;</a></li>';for(s=u=w;w<=t?u<=t:u>=t;s=w<=t?++u:--u){if(s===v){q+='<li class="page active">'}else{q+='<li class="page">'}q+='<a href="#" onclick="GetViewTable('+s+')">'+s+"</a></li>"}if(v<this.total_page){q+='<li class="next">'}else{q+='<li class="next active">'}q+='<a href="#" onclick="GetViewTable('+(v+1)+')">&rsaquo;</a></li>';if(v<this.total_page-1){q+='<li class="last">'}else{q+='<li class="last active">'}q+='<a href="#" onclick="GetViewTable('+this.total_page+')">&raquo;</a></li>';q+="</ul>";return this.elements.append(q)}};$("#registry .save").click(function(){var r,q;r=(function(){var v,t,u,s;u=$("#registry .rir:checked");s=[];for(v=0,t=u.length;v<t;v++){q=u[v];s.push(q.value)}return s})();$(this).UpdateTable({registry:r.join(",")});return c.click()});$("#country .save").click(function(){var r,q;r=(function(){var v,t,u,s;u=$("#country .cc:checked");s=[];for(v=0,t=u.length;v<t;v++){q=u[v];s.push(q.value)}return s})();$(this).UpdateTable({country:r.join(",")});return m.click()});$("#registry .rir").click(function(){if($("#registry_all").attr("checked")){return $("#registry_all").removeAttr("checked")}});$("#country .cc").click(function(){if($("#country_all").attr("checked")){return $("#country_all").removeAttr("checked")}});$("#registry .all").click(function(){if(this.checked){return $("#registry input").attr("checked","checked")}else{return $("#registry input").removeAttr("checked")}});$("#country .all").click(function(){if(this.checked){return $("#country input").attr("checked","checked")}else{return $("#country input").removeAttr("checked")}});m=$("#registry .clear").click(function(){return $("#registry input").removeAttr("checked")});c=$("#country .clear").click(function(){return $("#country input").removeAttr("checked")});k=$("#custom input");b="<CC>: <IPSTART>-<IPEND>";g=function(r){var q;q=k.attr("value");q+=r;return k.attr("value",q)};$("#custom .set_registry").click(function(){g("<REGISTRY>");return f.keyup()});$("#custom .set_country").click(function(){g("<CC>");return f.keyup()});$("#custom .set_ipstart").click(function(){g("<IPSTART>");return f.keyup()});$("#custom .set_ipend").click(function(){g("<IPEND>");return f.keyup()});n=$("#custom .reset").click(function(){i.click();g(b);return f.keyup()});i=$("#custom .clear").click(function(){k.attr("value","");return $("#custom .result").text("")});f=k.keyup(function(){var r,q;q=$(this).attr("value");r=$.trim(q);r=r.replace(/<REGISTRY>/g,"APNIC");r=r.replace(/<CC>/g,"JP");r=r.replace(/<IPSTART>/g,"192.168.0.0");r=r.replace(/<IPEND>/g,"192.168.0.255");return $("#custom .result").text(r)});$("#custom .output").click(function(){var q,t,u,s,w,v,r;if(e.length>0){t=k.attr("value");q=$.trim(t);s="";for(v=0,r=e.length;v<r;v++){u=e[v];w=q.replace(/<REGISTRY>/g,u.registry);w=w.replace(/<CC>/g,u.country);w=w.replace(/<IPSTART>/g,u.StartIP);w=w.replace(/<IPEND>/g,u.EndIP);s+=w+"<br>"}return $("body").html(s)}else{return alert("データが取得されていません。")}});$("#custom .download").click(function(){var w,q,s,v,t,r,u;u=(function(){var A,y,z,x;z=$("#registry .rir:checked");x=[];for(A=0,y=z.length;A<y;A++){t=z[A];x.push(t.value)}return x})();w=(function(){var A,y,z,x;z=$("#country .cc:checked");x=[];for(A=0,y=z.length;A<y;A++){t=z[A];x.push(t.value)}return x})();if(u.length>0&&w.length>0){return alert("レジストリ側、国名側の両方のチェックボックスにチェックが入っています。\nどちらか片方のチェックボックスをクリアして、再度行ってください。")}else{if(u.length===0&&w.length===0){return alert("レジストリ側、国名側の両方のチェックボックスにチェックが入っていません。\nどちらか片方の取得したいチェックボックスを選択して、再度行ってください。")}else{s=k.attr("value");q=$.trim(s);if(u.length>0){v=u.join(",");r="?registry="+v}else{v=w.join(",");r="?country="+v}return location.href=encodeURI("/jsoncustom"+r+"&settings="+q)}}});$("#custom").ready(function(){return n.click()});$(document).ready(function(){var q;$("#JavaScript_OFF").css("display","none");$("#view_row li:eq("+j(a)+")").addClass("active");q=$("#movepage");q.hide();return $(function(){$(window).scroll(function(){var r;r=$(this).scrollTop();if(r>100){return q.fadeIn()}else{return q.fadeOut()}});return q.click(function(){$("body, html").animate({scrollTop:0},600);return false})})})}).call(this);
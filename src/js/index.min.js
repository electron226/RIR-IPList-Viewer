(function(){var g,d,f,b,c,h,a,e;e=100;c=5;a=typeof exports!=="undefined"&&exports!==null?exports:this;f=[];h=0;b=NaN;$.fn.state=function(i){var j;j="disabled";return this.each(function(){var k;k=$(this);k.html(k.data()[i]);if(i==="loading"){return k.addClass(j).attr(j,j)}else{return k.removeClass(j).removeAttr(j)}})};$.fn.UpdateTable=function(i){var j;$("#load_circle").css("display","inline");j=$(this);j.state("loading");return $.getJSON("/json",i,function(k){var l;f=k;d(0,e);l={view_record:e,total_record:k.length,nav_count:c};b=$("#view_pages").pagination(l);j.state("complete");return $("#load_circle").css("display","none")})};a.GetViewTable=function(i){d((i-1)*e,i*e);return b.MakeNavigator(i)};d=function(p,m){var l,k,o,n;o="";k=0;for(l=n=p;p<=m?n<m:n>m;l=p<=m?++n:--n){if(f[l]!=null){o+="<tr>";o+="<td>"+escape(f[l].registry)+"</td>";o+="<td>"+escape(f[l].country)+"</td>";o+="<td>"+escape(f[l].StartIP)+"</td>";o+="<td>"+escape(f[l].EndIP)+"</td>";o+="</tr>"}}return $("#viewbar tbody").html(o)};$.fn.pagination=function(i){i.elements=i.elements!=null?i.elements:$(this);return new g(i)};$.fn.pagination.defaults={current_page:1,view_record:10,total_record:0,nav_count:5};g=function(i){var j;j=$.extend({},$.fn.pagination.defaults,i);this.current_page=j.current_page;this.view_record=j.view_record;this.total_record=j.total_record;this.total_page=Math.ceil(this.total_record/this.view_record);this.nav_count=j.nav_count;this.elements=j.elements;this.Initialized();return this};g.prototype={Initialized:function(){if(this.total_page<this.nav_count){this.nav_count=this.total_page}if(this.total_page<=1||this.total_page<this.current_page){return this.elements.empty()}else{return this.MakeNavigator(this.current_page)}},MakeNavigator:function(o){var p,l,m,k,j,n;this.elements.empty();k=Math.floor(this.nav_count/2);p=o-k;m=o+k;if(p<=0){p=1;m=this.nav_count}if(m>this.total_page){p=this.total_page-this.nav_count+1;m=this.total_page}j="<ul>";if(o>2){j+='<li class="first">'}else{j+='<li class="first active">'}j+='<a href="#" onclick="GetViewTable(1)">&laquo;</a></li>';if(o>1){j+='<li class="prev">'}else{j+='<li class="prev active">'}j+='<a href="#" onclick="GetViewTable('+(o-1)+')">&lsaquo;</a></li>';for(l=n=p;p<=m?n<=m:n>=m;l=p<=m?++n:--n){if(l===o){j+='<li class="page active">'}else{j+='<li class="page">'}j+='<a href="#" onclick="GetViewTable('+l+')">'+l+"</a></li>"}if(o<this.total_page){j+='<li class="next">'}else{j+='<li class="next active">'}j+='<a href="#" onclick="GetViewTable('+(o+1)+')">&rsaquo;</a></li>';if(o<this.total_page-1){j+='<li class="last">'}else{j+='<li class="last active">'}j+='<a href="#" onclick="GetViewTable('+this.total_page+')">&raquo;</a></li>';j+="</ul>";return this.elements.append(j)}};$("#registry_save").click(function(){var j,i;j=(function(){var n,l,m,k;m=$("#registry .rir:checked");k=[];for(n=0,l=m.length;n<l;n++){i=m[n];k.push(i.value)}return k})();$(this).UpdateTable({registry:j.join(",")});return $("#country_clear").click()});$("#country_save").click(function(){var j,i;j=(function(){var n,l,m,k;m=$("#country .cc:checked");k=[];for(n=0,l=m.length;n<l;n++){i=m[n];k.push(i.value)}return k})();$(this).UpdateTable({country:j.join(",")});return $("#registry_clear").click()});$("#registry .rir").click(function(){if($("#registry_all").attr("checked")){return $("#registry_all").removeAttr("checked")}});$("#country .cc").click(function(){if($("#country_all").attr("checked")){return $("#country_all").removeAttr("checked")}});$("#registry_all").click(function(){if(this.checked){return $("#registry input").attr("checked","checked")}else{return $("#registry input").removeAttr("checked")}});$("#country_all").click(function(){if(this.checked){return $("#country input").attr("checked","checked")}else{return $("#country input").removeAttr("checked")}});$("#registry_clear").click(function(){return $("#registry input").removeAttr("checked")});$("#country_clear").click(function(){return $("#country input").removeAttr("checked")});$(document).ready(function(){return $("#JavaScript_OFF").css("display","none")})}).call(this);
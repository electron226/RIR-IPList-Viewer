(function(){var i,m,f,g,c,l,n,o,j,b,e,d,h,k,a;a=150;h=5;k=typeof exports!=="undefined"&&exports!==null?exports:this;$.fn.state=function(p){var q;q="disabled";return this.each(function(){var r;r=$(this);r.html(r.data()[p]);if(p==="loading"){return r.addClass(q).attr(q,q)}else{return r.removeClass(q).removeAttr(q)}})};d=NaN;e=[];$.fn.UpdateTable=function(p){var q;$("#load_circle").css("display","inline");q=$(this);q.state("loading");return $.getJSON("/json",p,function(r){var s;e=r;o(0,a);s={view_record:a,total_record:r.length,nav_count:h};d=$("#view_pages").pagination(s);q.state("complete");return $("#load_circle").css("display","none")})};k.GetViewTable=function(p){o((p-1)*a,p*a);return d.MakeNavigator(p)};o=function(u,r){var q,p,t,s;t="";p=0;for(q=s=u;u<=r?s<r:s>r;q=u<=r?++s:--s){if(e[q]!=null){t+="<tr>";t+="<td>"+escape(e[q].registry)+"</td>";t+="<td>"+escape(e[q].country)+"</td>";t+="<td>"+escape(e[q].StartIP)+"</td>";t+="<td>"+escape(e[q].EndIP)+"</td>";t+="</tr>"}}return $("#viewbar tbody").html(t)};$.fn.pagination=function(p){p.elements=p.elements!=null?p.elements:$(this);return new n(p)};$.fn.pagination.defaults={current_page:1,view_record:10,total_record:0,nav_count:5};n=function(p){var q;q=$.extend({},$.fn.pagination.defaults,p);this.current_page=q.current_page;this.view_record=q.view_record;this.total_record=q.total_record;this.total_page=Math.ceil(this.total_record/this.view_record);this.nav_count=q.nav_count;this.elements=q.elements;this.Initialized();return this};n.prototype={Initialized:function(){if(this.total_page<this.nav_count){this.nav_count=this.total_page}if(this.total_page<=1||this.total_page<this.current_page){this.elements.empty();return this.elements.css("display","none")}else{this.MakeNavigator(this.current_page);return this.elements.css("display","block")}},MakeNavigator:function(u){var v,r,s,q,p,t;this.elements.empty();q=Math.floor(this.nav_count/2);v=u-q;s=u+q;if(v<=0){v=1;s=this.nav_count}if(s>this.total_page){v=this.total_page-this.nav_count+1;s=this.total_page}p="<ul>";if(u>2){p+='<li class="first">'}else{p+='<li class="first active">'}p+='<a href="#" onclick="GetViewTable(1)">&laquo;</a></li>';if(u>1){p+='<li class="prev">'}else{p+='<li class="prev active">'}p+='<a href="#" onclick="GetViewTable('+(u-1)+')">&lsaquo;</a></li>';for(r=t=v;v<=s?t<=s:t>=s;r=v<=s?++t:--t){if(r===u){p+='<li class="page active">'}else{p+='<li class="page">'}p+='<a href="#" onclick="GetViewTable('+r+')">'+r+"</a></li>"}if(u<this.total_page){p+='<li class="next">'}else{p+='<li class="next active">'}p+='<a href="#" onclick="GetViewTable('+(u+1)+')">&rsaquo;</a></li>';if(u<this.total_page-1){p+='<li class="last">'}else{p+='<li class="last active">'}p+='<a href="#" onclick="GetViewTable('+this.total_page+')">&raquo;</a></li>';p+="</ul>";return this.elements.append(p)}};$("#registry .save").click(function(){var q,p;q=(function(){var u,s,t,r;t=$("#registry .rir:checked");r=[];for(u=0,s=t.length;u<s;u++){p=t[u];r.push(p.value)}return r})();$(this).UpdateTable({registry:q.join(",")});return c.click()});$("#country .save").click(function(){var q,p;q=(function(){var u,s,t,r;t=$("#country .cc:checked");r=[];for(u=0,s=t.length;u<s;u++){p=t[u];r.push(p.value)}return r})();$(this).UpdateTable({country:q.join(",")});return l.click()});$("#registry .rir").click(function(){if($("#registry_all").attr("checked")){return $("#registry_all").removeAttr("checked")}});$("#country .cc").click(function(){if($("#country_all").attr("checked")){return $("#country_all").removeAttr("checked")}});$("#registry .all").click(function(){if(this.checked){return $("#registry input").attr("checked","checked")}else{return $("#registry input").removeAttr("checked")}});$("#country .all").click(function(){if(this.checked){return $("#country input").attr("checked","checked")}else{return $("#country input").removeAttr("checked")}});l=$("#registry .clear").click(function(){return $("#registry input").removeAttr("checked")});c=$("#country .clear").click(function(){return $("#country input").removeAttr("checked")});j=$("#custom input");b="<CC>: <IPSTART>-<IPEND>";g=function(q){var p;p=j.attr("value");p+=q;return j.attr("value",p)};$("#custom .set_registry").click(function(){g("<REGISTRY>");return f.keyup()});$("#custom .set_country").click(function(){g("<CC>");return f.keyup()});$("#custom .set_ipstart").click(function(){g("<IPSTART>");return f.keyup()});$("#custom .set_ipend").click(function(){g("<IPEND>");return f.keyup()});m=$("#custom .reset").click(function(){i.click();g(b);return f.keyup()});i=$("#custom .clear").click(function(){j.attr("value","");return f.keyup()});f=j.keyup(function(){var q,p;p=$(this).attr("value");q=$.trim(p);q=q.replace(/<REGISTRY>/g,"APNIC");q=q.replace(/<CC>/g,"JP");q=q.replace(/<IPSTART>/g,"192.168.0.0");q=q.replace(/<IPEND>/g,"192.168.0.255");return $("#custom .result").text(q)});$("#custom .output").click(function(){var p,s,t,r,v,u,q;if(e.length>0){s=j.attr("value");p=$.trim(s);r="";for(u=0,q=e.length;u<q;u++){t=e[u];v=p.replace(/<REGISTRY>/g,t.registry);v=v.replace(/<CC>/g,t.country);v=v.replace(/<IPSTART>/g,t.StartIP);v=v.replace(/<IPEND>/g,t.EndIP);r+=v+"<br>"}return $("body").html(r)}else{return alert("データが取得されていません。")}});$("#custom .download").click(function(){var v,p,r,u,s,q,t;t=(function(){var z,x,y,w;y=$("#registry .rir:checked");w=[];for(z=0,x=y.length;z<x;z++){s=y[z];w.push(s.value)}return w})();v=(function(){var z,x,y,w;y=$("#country .cc:checked");w=[];for(z=0,x=y.length;z<x;z++){s=y[z];w.push(s.value)}return w})();if(t.length>0&&v.length>0){return alert("レジストリ側、国名側の両方のチェックボックスにチェックが入っています。\nどちらか片方のチェックボックスをクリアして、再度行ってください。")}else{if(t.length===0&&v.length===0){return alert("レジストリ側、国名側の両方のチェックボックスにチェックが入っていません。\nどちらか片方の取得したいチェックボックスを選択して、再度行ってください。")}else{r=j.attr("value");p=$.trim(r);if(t.length>0){u=t.join(",");q="?registry="+u}else{u=v.join(",");q="?country="+u}return location.href=encodeURI("/jsoncustom"+q+"&settings="+p)}}});$("#custom").ready(function(){return m.click()});$(document).ready(function(){return $("#JavaScript_OFF").css("display","none")})}).call(this);